(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[252],{36543:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>T});var l=a(37876),t=a(14232),n=a(77328),r=a.n(n),i=a(15392),c=a(77932),d=a(6960),u=a(28638),o=a(9870),h=a(48230),x=a.n(h),m=a(37959),j=a(12372),g=a(48647),p=a(8893),v=a(59688),f=a(14e3),N=a(54587),b=a.n(N),y=a(13408),E=a(68171),w=a(64185),_=a(31944);let S=e=>{let{isLoading:s,email:a,name:n,setEmail:r,onSubmit:i}=e,[h,x]=(0,t.useState)(n),[j,p]=(0,t.useState)(a),[v,f]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{p(a)},[a]),(0,t.useEffect)(()=>{x(n)},[n]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(o.J,{htmlFor:"name",children:"Name"}),(0,l.jsx)(c.p,{"aria-invalid":v,id:"name",type:"text",placeholder:"John Doe",value:h,onChange:e=>{x(e.target.value)}}),v&&(0,l.jsx)(u.BT,{className:"text-destructive",children:"Enter a valid email address"})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(o.J,{htmlFor:"email",children:"Email"}),(0,l.jsx)(c.p,{"aria-invalid":v,id:"email",type:"email",placeholder:"m@example.com",value:j,onChange:e=>{p(e.target.value),r(e.target.value)}}),v&&(0,l.jsx)(u.BT,{className:"text-destructive",children:"Enter a valid email address"})]})]}),(0,l.jsxs)(d.$,{type:"submit",className:"w-full cursor-pointer bg-blue-500/60 text-white hover:bg-blue-500/80",onClick:()=>{if(!(0,g.DT)(j))return void f(!0);f(!1),i()},disabled:s,children:["Create Account",s?(0,l.jsx)(m.A,{className:"animate-spin"}):null]})]})},T=e=>{let s=(0,f.useRouter)(),a=(0,y.jL)(),[n,c]=(0,t.useState)(""),[o,h]=(0,t.useState)(""),[m,g]=(0,t.useState)(""),[N,T]=(0,t.useState)(!1),[k,C]=(0,t.useState)(!1);return(0,l.jsxs)(i.A,{children:[(0,l.jsx)(r(),{children:(0,l.jsx)("title",{children:"Signup | Expense"})}),(0,l.jsxs)(u.Zp,{className:"w-full max-w-sm h-[572px]",children:[(0,l.jsxs)(u.aR,{children:[(0,l.jsx)(b(),{src:_.A,alt:"Logo",width:100,height:100,className:"w-16 h-16 mb-2 mx-auto"}),(0,l.jsx)(u.ZB,{children:"Create your account"}),(0,l.jsx)(u.BT,{children:N?(0,l.jsxs)(l.Fragment,{children:["OTP sent to ",(0,l.jsx)("strong",{children:n})]}):"Enter your details to create your account"})]}),(0,l.jsx)(u.Wu,{className:"space-y-4 flex-1",children:N?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("br",{}),(0,l.jsx)(j.A,{value:m,setValue:g,onVerify:()=>{C(!0),p.F.signup.createAccount({email:n,name:o,otp:m}).then(e=>{if(!e.error){var l,t,n,r;localStorage.setItem("expense-token",(null==(t=e.data)||null==(l=t.data)?void 0:l.token)||""),a((0,E.gV)(null==(r=e.data)||null==(n=r.data)?void 0:n.user)),s.push("/dashboard")}}).finally(()=>{C(!1)})},isLoading:k}),(0,l.jsxs)(u.BT,{children:["Change Email?"," ",(0,l.jsx)(d.$,{variant:"link",className:"px-0 py-0 h-auto cursor-pointer",onClick:()=>T(!1),children:"Click here"})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(S,{email:n,name:o,setEmail:c,setName:h,onSubmit:()=>{C(!0),p.F.signup.generateOTP(n).then(e=>{if(!e.error){var s;v.oR.success(null==(s=e.data)?void 0:s.message,{description:"OTP is valid for 5 minutes",duration:4e3,position:"top-center",classNames:{success:"!bg-green-600"}}),T(!0)}}).finally(()=>{C(!1)})},isLoading:k}),(0,l.jsxs)("div",{className:"space-y-8 mt-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,l.jsx)("hr",{className:"flex-1"})," OR ",(0,l.jsx)("hr",{className:"flex-1"})]}),(0,l.jsx)(w._,{})]})]})}),(0,l.jsx)(u.wL,{className:"flex-col gap-2 border-t",children:(0,l.jsxs)(u.BT,{children:["Already have an account?"," ",(0,l.jsx)(x(),{href:"/login",className:"underline underline-offset-2",children:"Login here"})]})})]})]})}},45708:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/signup",function(){return a(36543)}])}},e=>{var s=s=>e(e.s=s);e.O(0,[307,627,992,536,676,636,593,792],()=>s(45708)),_N_E=e.O()}]);