(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{6916:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>E});var l=a(37876),t=a(14232),i=a(77328),n=a.n(i),r=a(15392),c=a(77932),d=a(6960),o=a(28638),u=a(9870),h=a(48230),x=a.n(h),m=a(37959);let j=(0,a(11713).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var g=a(12372),p=a(48647),f=a(8893),v=a(59688),N=a(14e3),y=a(13408),b=a(68171),w=a(54587),T=a.n(w),k=a(64185);let _=e=>{let{isLoading:s,value:a,setValue:i,onSubmit:n}=e,[r,h]=(0,t.useState)(a),[x,g]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{h(a)},[a]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"flex flex-col gap-6",children:(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(u.J,{htmlFor:"email",children:"Email"}),(0,l.jsx)(c.p,{"aria-invalid":x,id:"email",type:"email",placeholder:"m@example.com",value:r,onChange:e=>{h(e.target.value),i(e.target.value)}}),x&&(0,l.jsx)(o.BT,{className:"text-destructive",children:"Enter a valid email address"})]})}),(0,l.jsxs)(d.$,{type:"submit",className:"w-full cursor-pointer bg-blue-500/60 text-white hover:bg-blue-500/80",onClick:()=>{if(!(0,p.DT)(r))return void g(!0);g(!1),n()},disabled:s,children:["Get OTP",s?(0,l.jsx)(m.A,{className:"animate-spin"}):null]}),(0,l.jsxs)(o.BT,{className:"flex items-center gap-2",children:[(0,l.jsx)(j,{size:"16"})," OTP will be sent to your email"]})]})},E=e=>{let s=(0,N.useRouter)(),a=(0,y.jL)(),[i,c]=(0,t.useState)(""),[u,h]=(0,t.useState)(""),[m,j]=(0,t.useState)(!1),[p,w]=(0,t.useState)(!1);return(0,l.jsxs)(r.A,{children:[(0,l.jsx)(n(),{children:(0,l.jsx)("title",{children:"Login | Expense"})}),(0,l.jsxs)(o.Zp,{className:"w-full max-w-sm h-[572px]",children:[(0,l.jsxs)(o.aR,{children:[(0,l.jsx)(T(),{src:"/images/logo.png",alt:"Logo",width:100,height:100,className:"w-16 h-16 mb-2 mx-auto"}),(0,l.jsx)(o.ZB,{children:"Login to your account"}),(0,l.jsx)(o.BT,{children:m?(0,l.jsxs)("div",{className:"space-y-4 pt-4",children:["OTP sent to ",(0,l.jsx)("strong",{children:i})]}):"Enter your email below to login to your account"})]}),(0,l.jsx)(o.Wu,{className:"space-y-4 flex-1",children:m?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("br",{}),(0,l.jsx)(g.A,{value:u,setValue:h,onVerify:()=>{w(!0),f.F.auth.verifyOTP({email:i,otp:u}).then(e=>{if(!e.error){var l,t,i,n;localStorage.setItem("expense-token",(null==(t=e.data)||null==(l=t.data)?void 0:l.token)||""),a((0,b.gV)(null==(n=e.data)||null==(i=n.data)?void 0:i.user)),s.push("/dashboard")}}).finally(()=>{w(!1)})},isLoading:p}),(0,l.jsxs)(o.BT,{children:["Change Email?"," ",(0,l.jsx)(d.$,{variant:"link",className:"px-0 py-0 h-auto cursor-pointer",onClick:()=>j(!1),children:"Click here"})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(_,{value:i,setValue:c,onSubmit:()=>{w(!0),f.F.auth.generateOTP(i).then(e=>{if(!e.error){var s;v.oR.success(null==(s=e.data)?void 0:s.message,{description:"OTP is valid for 5 minutes",duration:4e3,position:"top-center",classNames:{success:"!bg-green-600"}}),j(!0)}}).finally(()=>{w(!1)})},isLoading:p}),(0,l.jsxs)("div",{className:"space-y-8 mt-8",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,l.jsx)("hr",{className:"flex-1"})," OR ",(0,l.jsx)("hr",{className:"flex-1"})]}),(0,l.jsx)(k._,{})]})]})}),(0,l.jsx)(o.wL,{className:"flex-col gap-2 border-t",children:(0,l.jsxs)(o.BT,{children:["Don't have an account?"," ",(0,l.jsx)(x(),{href:"/signup",className:"underline underline-offset-2",children:"Create here"})]})})]})]})}},7984:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return a(6916)}])}},e=>{var s=s=>e(e.s=s);e.O(0,[307,627,992,536,476,636,593,792],()=>s(7984)),_N_E=e.O()}]);