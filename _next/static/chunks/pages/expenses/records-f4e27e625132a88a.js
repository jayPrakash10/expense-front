(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[64],{24092:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/expenses/records",function(){return s(24571)}])},24571:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eP});var a=s(37876),l=s(77328),n=s.n(l),r=s(60138),i=s(14232),o=s(8893),c=s(28638),d=s(68283),u=s(37087),p=s(65104),x=s(22963),m=s(96108),h=s(12089),f=s(11713);let g=(0,f.A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),v=(0,f.A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var j=s(43846);let y=(0,f.A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);var b=s(29898),N=s(33716),w=s(10714),C=s(91844),k=s(73520),A=s(22658),S=s(90870),_=s(70294),M=s(68212),P=s(31893),z=s(96822),R=s(66326),E=s(82987),D=s(58162),O=s(94769),F=s(86324),I="Popover",[q,$]=(0,C.A)(I,[M.Bk]),U=(0,M.Bk)(),[B,H]=q(I),L=e=>{let{__scopePopover:t,children:s,open:l,defaultOpen:n,onOpenChange:r,modal:o=!1}=e,c=U(t),d=i.useRef(null),[u,p]=i.useState(!1),[x,m]=(0,D.i)({prop:l,defaultProp:n??!1,onChange:r,caller:I});return(0,a.jsx)(M.bL,{...c,children:(0,a.jsx)(B,{scope:t,contentId:(0,_.B)(),triggerRef:d,open:x,onOpenChange:m,onOpenToggle:i.useCallback(()=>m(e=>!e),[m]),hasCustomAnchor:u,onCustomAnchorAdd:i.useCallback(()=>p(!0),[]),onCustomAnchorRemove:i.useCallback(()=>p(!1),[]),modal:o,children:s})})};L.displayName=I;var W="PopoverAnchor";i.forwardRef((e,t)=>{let{__scopePopover:s,...l}=e,n=H(W,s),r=U(s),{onCustomAnchorAdd:o,onCustomAnchorRemove:c}=n;return i.useEffect(()=>(o(),()=>c()),[o,c]),(0,a.jsx)(M.Mz,{...r,...l,ref:t})}).displayName=W;var Q="PopoverTrigger",T=i.forwardRef((e,t)=>{let{__scopePopover:s,...l}=e,n=H(Q,s),r=U(s),i=(0,w.s)(t,n.triggerRef),o=(0,a.jsx)(R.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":el(n.open),...l,ref:i,onClick:(0,N.m)(e.onClick,n.onOpenToggle)});return n.hasCustomAnchor?o:(0,a.jsx)(M.Mz,{asChild:!0,...r,children:o})});T.displayName=Q;var V="PopoverPortal",[Y,Z]=q(V,{forceMount:void 0}),G=e=>{let{__scopePopover:t,forceMount:s,children:l,container:n}=e,r=H(V,t);return(0,a.jsx)(Y,{scope:t,forceMount:s,children:(0,a.jsx)(z.C,{present:s||r.open,children:(0,a.jsx)(P.Z,{asChild:!0,container:n,children:l})})})};G.displayName=V;var K="PopoverContent",X=i.forwardRef((e,t)=>{let s=Z(K,e.__scopePopover),{forceMount:l=s.forceMount,...n}=e,r=H(K,e.__scopePopover);return(0,a.jsx)(z.C,{present:l||r.open,children:r.modal?(0,a.jsx)(ee,{...n,ref:t}):(0,a.jsx)(et,{...n,ref:t})})});X.displayName=K;var J=(0,E.TL)("PopoverContent.RemoveScroll"),ee=i.forwardRef((e,t)=>{let s=H(K,e.__scopePopover),l=i.useRef(null),n=(0,w.s)(t,l),r=i.useRef(!1);return i.useEffect(()=>{let e=l.current;if(e)return(0,O.Eq)(e)},[]),(0,a.jsx)(F.A,{as:J,allowPinchZoom:!0,children:(0,a.jsx)(es,{...e,ref:n,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,N.m)(e.onCloseAutoFocus,e=>{e.preventDefault(),r.current||s.triggerRef.current?.focus()}),onPointerDownOutside:(0,N.m)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey;r.current=2===t.button||s},{checkForDefaultPrevented:!1}),onFocusOutside:(0,N.m)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),et=i.forwardRef((e,t)=>{let s=H(K,e.__scopePopover),l=i.useRef(!1),n=i.useRef(!1);return(0,a.jsx)(es,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(l.current||s.triggerRef.current?.focus(),t.preventDefault()),l.current=!1,n.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(l.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));let a=t.target;s.triggerRef.current?.contains(a)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),es=i.forwardRef((e,t)=>{let{__scopePopover:s,trapFocus:l,onOpenAutoFocus:n,onCloseAutoFocus:r,disableOutsidePointerEvents:i,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...p}=e,x=H(K,s),m=U(s);return(0,A.Oh)(),(0,a.jsx)(S.n,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:n,onUnmountAutoFocus:r,children:(0,a.jsx)(k.qW,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>x.onOpenChange(!1),children:(0,a.jsx)(M.UC,{"data-state":el(x.open),role:"dialog",id:x.contentId,...m,...p,ref:t,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ea="PopoverClose";function el(e){return e?"open":"closed"}i.forwardRef((e,t)=>{let{__scopePopover:s,...l}=e,n=H(ea,s);return(0,a.jsx)(R.sG.button,{type:"button",...l,ref:t,onClick:(0,N.m)(e.onClick,()=>n.onOpenChange(!1))})}).displayName=ea,i.forwardRef((e,t)=>{let{__scopePopover:s,...l}=e,n=U(s);return(0,a.jsx)(M.i3,{...n,...l,ref:t})}).displayName="PopoverArrow";var en=s(48647);function er(e){let{...t}=e;return(0,a.jsx)(L,{"data-slot":"popover",...t})}function ei(e){let{...t}=e;return(0,a.jsx)(T,{"data-slot":"popover-trigger",...t})}function eo(e){let{className:t,align:s="center",sideOffset:l=4,...n}=e;return(0,a.jsx)(G,{children:(0,a.jsx)(X,{"data-slot":"popover-content",align:s,sideOffset:l,className:(0,en.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...n})})}var ec=s(6960),ed=s(59688),eu=s(31777),ep=s(43487);let ex=(0,f.A)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);function em(e){let{className:t,...s}=e;return(0,a.jsx)("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:(0,en.cn)("mx-auto flex w-full justify-center",t),...s})}function eh(e){let{className:t,...s}=e;return(0,a.jsx)("ul",{"data-slot":"pagination-content",className:(0,en.cn)("flex flex-row items-center gap-1",t),...s})}function ef(e){let{...t}=e;return(0,a.jsx)("li",{"data-slot":"pagination-item",...t})}function eg(e){let{className:t,isActive:s,size:l="icon",...n}=e;return(0,a.jsx)("a",{"aria-current":s?"page":void 0,"data-slot":"pagination-link","data-active":s,className:(0,en.cn)((0,ec.r)({variant:s?"default":"ghost",size:l}),t),...n})}function ev(e){let{className:t,...s}=e;return(0,a.jsxs)("span",{"aria-hidden":!0,"data-slot":"pagination-ellipsis",className:(0,en.cn)("flex size-9 items-center justify-center",t),...s,children:[(0,a.jsx)(ex,{className:"size-4"}),(0,a.jsx)("span",{className:"sr-only",children:"More pages"})]})}var ej=s(78256),ey=s(94615),eb=s(9537),eN=s(9299),ew=s(39834),eC=s(14e3),ek=s(95506),eA=s(60433),eS=s(19657);let e_=e=>{let{dateRange:t,setDateRange:s,filter:l,setFilter:n}=e;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"h-0 flex items-center justify-end",children:(t||l.category||"all"!==l.paymentMode)&&(0,a.jsx)("button",{onClick:()=>{s(void 0),n({paymentMode:"all",category:""})},className:"text-destructive cursor-pointer px-2 text-xs",children:"Clear All"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium flex items-center gap-2",children:"Date Range"}),t&&(0,a.jsx)("button",{onClick:()=>s(void 0),className:"text-destructive cursor-pointer px-2 text-xs",children:"Clear"})]}),(0,a.jsxs)(er,{children:[(0,a.jsx)(ei,{asChild:!0,children:(0,a.jsxs)(ec.$,{variant:"outline",size:"sm",className:"w-full bg-transparent h-9 justify-start text-left font-normal gap-2",children:[(0,a.jsx)(v,{className:"h-4 w-4"}),t?(0,d.Yq)(t.from,"dd-MM-yyyy")===(0,d.Yq)(t.to,"dd-MM-yyyy")?(0,d.Yq)(t.from,"dd-MM-yyyy"):"".concat((0,d.Yq)(t.from,"dd-MM-yyyy")," - ").concat((0,d.Yq)(t.to,"dd-MM-yyyy")):(0,a.jsx)("span",{className:"text-muted-foreground",children:"Select Date Range"})]})}),(0,a.jsx)(eo,{className:"w-auto p-0",align:"end",children:(0,a.jsx)(b.V,{mode:"range",disabled:{after:new Date},defaultMonth:new Date,selected:t,onSelect:e=>{s(e||void 0)},className:"rounded-md"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium flex items-center gap-2",children:"Spent On"}),l.category&&(0,a.jsx)("button",{onClick:()=>n(e=>({...e,category:""})),className:"text-destructive cursor-pointer px-2 text-xs",children:"Clear"})]}),(0,a.jsx)(eM,{selected:l.category,onSelect:e=>n(t=>({...t,category:e}))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium flex items-center gap-2",children:"Payment Mode"}),"all"!==l.paymentMode&&(0,a.jsx)("button",{onClick:()=>n(e=>({...e,paymentMode:"all"})),className:"text-destructive cursor-pointer px-2 text-xs",children:"Clear"})]}),(0,a.jsxs)(ej.l6,{value:l.paymentMode,onValueChange:e=>n(t=>({...t,paymentMode:e})),children:[(0,a.jsx)(ej.bq,{className:"w-full",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ey.wB,{className:"text-foreground",children:(0,a.jsx)(j.A,{})}),(0,a.jsx)(ej.yv,{placeholder:"Select payment mode"})]})}),(0,a.jsxs)(ej.gC,{children:[(0,a.jsx)(ej.eb,{value:"all",children:"All Payment Modes"}),(0,a.jsx)(ej.eb,{value:"cash",children:"Cash"}),(0,a.jsx)(ej.eb,{value:"card",children:"Card"}),(0,a.jsx)(ej.eb,{value:"upi",children:"UPI"}),(0,a.jsx)(ej.eb,{value:"net_banking",children:"Net Banking"})]})]})]})]})},eM=e=>{let{selected:t,onSelect:s}=e,l=(0,eu.d4)(e=>e.categories.categories),[n,r]=(0,i.useState)(null);(0,i.useEffect)(()=>{r(l.flatMap(e=>e.subcategories).find(e=>(null==e?void 0:e._id)===t))},[t,l]);let o=e=>{r(e),s(e._id)};return(0,a.jsxs)(eb.rI,{children:[(0,a.jsx)(eb.ty,{asChild:!0,children:(0,a.jsx)(ec.$,{variant:"outline",className:"w-full bg-transparent justify-between px-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y,{className:"size-4"}),n?(0,a.jsx)("span",{className:"",children:n.name}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"Select Category"})]})})}),(0,a.jsx)(eb.SQ,{side:"bottom",align:"end",className:"lg:max-w-[600px]",children:(0,a.jsxs)(eN.F,{className:"w-full whitespace-nowrap",children:[(0,a.jsx)("div",{className:"flex flex-col flex-wrap max-h-80 w-max gap-2 pb-3",children:l.map(e=>{var t;return(0,a.jsxs)(eb.I,{className:"w-44",children:[(0,a.jsx)(eb.lp,{className:"font-semibold",children:e.category_name}),(0,a.jsx)(eb.mB,{className:"mx-0"}),null==(t=e.subcategories)?void 0:t.map(e=>(0,a.jsx)(eb._2,{className:"text-muted-foreground",onSelect:()=>o(e),children:e.name},e._id))]},e._id)})}),(0,a.jsx)(eN.$,{orientation:"horizontal"})]})})]})},eP=e=>{let[t,s]=(0,i.useState)(!0),l=(0,eu.d4)(e=>e.expenses.expenses),[f,v]=(0,i.useState)(new Set),[j,y]=(0,i.useState)(null),[b,N]=(0,i.useState)(1),[w,C]=(0,i.useState)(10),[k,A]=(0,i.useState)({paymentMode:"all",category:""}),[S,_]=(0,i.useState)(void 0),[M,P]=(0,i.useState)(!1),z=(0,eu.wA)(),R=new URLSearchParams,E=(0,eC.useSearchParams)(),{replace:D}=(0,eC.useRouter)();E.forEach((e,t)=>{R.set(t,e)}),(0,i.useEffect)(()=>{E.forEach((e,t)=>{R.set(t,e)});let e=parseInt(E.get("page")||"1"),t=parseInt(E.get("limit")||"10");(e||0===e)&&j&&(e<=j.totalPages?N(e):(R.set("page","1"),D("?".concat(R.toString())))),(t||0===t)&&j&&([10,20,30].includes(t)?C(t):(R.set("limit","10"),D("?".concat(R.toString()))))},[E,j]),(0,i.useEffect)(()=>{},[j]),(0,i.useEffect)(()=>{O()},[w,b,k,S]);let O=()=>{let e={limit:w,page:b,...S&&{startDate:(0,d.Yq)(S.from,"yyyy-MM-dd HH:mm:ss"),endDate:(0,d.Yq)(function(e,t){let s=(0,u.a)(e,void 0);return s.setHours(23,59,59,999),s}(S.to),"yyyy-MM-dd HH:mm:ss")},..."all"!==k.paymentMode&&{mode:k.paymentMode},...k.category&&{sub_category:k.category}};o.F.expenses.getRecents(e).then(e=>{if(!e.error){var t,s;z((0,ek.IW)((null==(t=e.data)?void 0:t.data)||[])),y((null==(s=e.data)?void 0:s.meta)||null)}}).finally(()=>{s(!1)})},F=(0,i.useCallback)(()=>{b!==(null==j?void 0:j.totalPages)&&q(b+1)},[j,b]),I=(0,i.useCallback)(()=>{1!==b&&q(b-1)},[j,b]),q=e=>{R.set("page",e.toString()),D("?".concat(R.toString())),N(e)},$=e=>{R.set("limit",e.toString()),D("?".concat(R.toString())),C(e)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n(),{children:(0,a.jsx)("title",{children:"Records | Expense"})}),(0,a.jsxs)(r.A,{children:[(0,a.jsx)(eS.A,{onAdd:()=>O()}),(0,a.jsx)(eA.A,{onUpdate:()=>O()}),(0,a.jsx)("div",{className:"py-4",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"All Expenses"}),(0,a.jsxs)(ec.$,{className:"h-8 px-1 has-[>svg]:px-2 bg-primary hover:bg-primary/80",onClick:()=>{z((0,ep.us)(!0))},children:[(0,a.jsx)(p.A,{className:"size-4"})," Add Expense"]})]}),(0,a.jsx)(c.Zp,{className:"py-2 px-2",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 w-full flex items-center justify-start gap-4",children:[(0,a.jsx)(em,{className:"w-fit mx-[unset]",children:(0,a.jsxs)(eh,{children:[(0,a.jsx)(ef,{children:(0,a.jsx)(ec.$,{className:"bg-muted hover:bg-muted/80 text-muted-foreground",disabled:1===b,onClick:I,children:(0,a.jsx)(x.A,{})})}),b>2&&(0,a.jsx)(ef,{children:(0,a.jsx)(eg,{className:"bg-accent data-[active=true]:bg-primary data-[active=true]:hover:bg-primary/80",isActive:1===b,onClick:()=>{q(1)},children:"1"})}),b>3&&(0,a.jsx)(ef,{children:(0,a.jsx)(ev,{})}),Array.from({length:(null==j?void 0:j.totalPages)||1},(e,t)=>(0,a.jsx)(ef,{children:(0,a.jsx)(eg,{className:"bg-accent data-[active=true]:bg-primary data-[active=true]:hover:bg-primary/80",isActive:b===t+1,onClick:()=>{q(t+1)},children:t+1})},t+1)).slice(b-2<0?0:b-2,b+1),b+2<((null==j?void 0:j.totalPages)||0)&&(0,a.jsx)(ef,{children:(0,a.jsx)(ev,{})}),b+1<((null==j?void 0:j.totalPages)||0)&&(0,a.jsx)(ef,{children:(0,a.jsx)(eg,{className:"bg-accent data-[active=true]:bg-primary data-[active=true]:hover:bg-primary/80",isActive:b===((null==j?void 0:j.totalPages)||0),onClick:()=>q((null==j?void 0:j.totalPages)||0),children:null==j?void 0:j.totalPages})}),(0,a.jsx)(ef,{children:(0,a.jsx)(ec.$,{className:"bg-muted hover:bg-muted/80 text-muted-foreground",disabled:b===((null==j?void 0:j.totalPages)||1),onClick:F,children:(0,a.jsx)(m.A,{})})})]})}),(0,a.jsxs)(ej.l6,{value:w.toString(),onValueChange:e=>$(Number(e)),children:[(0,a.jsx)(ej.bq,{children:(0,a.jsx)(ej.yv,{placeholder:"Select a limit"})}),(0,a.jsxs)(ej.gC,{children:[(0,a.jsx)(ej.eb,{value:"10",children:"10"}),(0,a.jsx)(ej.eb,{value:"20",children:"20"}),(0,a.jsx)(ej.eb,{value:"30",children:"30"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[f.size>0&&(0,a.jsx)(ec.$,{variant:"outline",className:"text-destructive has-[>svg]:px-2 aspect-square",onClick:()=>{o.F.expenses.deleteMultiple(Array.from(f)).then(e=>{e.error||(ed.oR.success("Expenses deleted successfully",{duration:4e3,position:"top-center",classNames:{success:"!bg-destructive"}}),O(),v(new Set))})},children:(0,a.jsx)(h.A,{className:"h-4 w-4"})}),(0,a.jsxs)(er,{open:M,onOpenChange:P,children:[(0,a.jsx)(ei,{asChild:!0,children:(0,a.jsxs)(ec.$,{variant:"outline",className:"justify-center aspect-square w-auto has-[>svg]:px-2 font-normal relative",children:[(0,a.jsx)(g,{className:"h-4 w-4"}),(S||"all"!==k.paymentMode)&&(0,a.jsx)("span",{className:"absolute right-1 top-1 aspect-square bg-primary rounded-full px-1.5"})]})}),(0,a.jsx)(eo,{className:"w-[300px] p-4",align:"end",children:(0,a.jsx)(e_,{dateRange:S,setDateRange:_,filter:k,setFilter:A})})]})]})]})}),(0,a.jsx)(c.Zp,{className:"p-4",children:(0,a.jsx)(ew.A,{expenses:l,selectable:!0,selectedItems:f,setSelectedItems:v,loading:t,onDelete:()=>{O()}})})]})})]})]})}},43846:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(11713).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},60433:(e,t,s)=>{"use strict";s.d(t,{A:()=>y});var a=s(37876),l=s(13816),n=s(6960),r=s(77932),i=s(14232),o=s(9537),c=s(9299),d=s(52393),u=s(29898),p=s(28638),x=s(31777),m=s(8893),h=s(43487),f=s(27122),g=s(59688);let v=e=>{let{selected:t,onSelect:s}=e,l=(0,x.d4)(e=>e.categories.categories),[r,d]=(0,i.useState)(null);(0,i.useEffect)(()=>{d(l.flatMap(e=>e.subcategories).find(e=>(null==e?void 0:e._id)===t))},[t,l]);let u=e=>{d(e),s(e._id)};return(0,a.jsxs)(o.rI,{children:[(0,a.jsx)(o.ty,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"outline",className:"w-full justify-start px-2",children:r?(0,a.jsx)("span",{className:"font-semibold",children:r.name}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"Where did you spent?"})})}),(0,a.jsx)(o.SQ,{side:"bottom",align:"start",className:"lg:max-w-[600px]",children:(0,a.jsxs)(c.F,{className:"w-full whitespace-nowrap",children:[(0,a.jsx)("div",{className:"flex flex-col flex-wrap max-h-80 w-max gap-2 pb-3",children:l.map(e=>{var t;return(0,a.jsxs)(o.I,{className:"w-44",children:[(0,a.jsx)(o.lp,{className:"font-semibold",children:e.category_name}),(0,a.jsx)(o.mB,{className:"mx-0"}),null==(t=e.subcategories)?void 0:t.map(e=>(0,a.jsx)(o._2,{className:"text-muted-foreground",onSelect:()=>u(e),children:e.name},e._id))]},e._id)})}),(0,a.jsx)(c.$,{orientation:"horizontal"})]})})]})},j=e=>{let{selected:t,onSelect:s}=e,[l,r]=(0,i.useState)(null);(0,i.useEffect)(()=>{r(f.Q.find(e=>e.value===t))},[t,f.Q]);let c=e=>{r(e),s(null==e?void 0:e.value)};return(0,a.jsxs)(o.rI,{children:[(0,a.jsx)(o.ty,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"outline",className:"w-full justify-start px-2",children:l?(0,a.jsx)("span",{className:"font-semibold",children:null==l?void 0:l.label}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"How did you spent?"})})}),(0,a.jsx)(o.SQ,{side:"bottom",align:"start",className:"w-96",children:f.Q.map(e=>(0,a.jsx)(o._2,{onSelect:()=>c(e),children:e.label},e.value))})]})},y=e=>{let{onUpdate:t}=e,s=(0,x.wA)(),{expenseId:i,category:o,mode:c,amount:f,date:y,isUpdateExpenseOpen:b}=(0,x.d4)(e=>e.global),N=async()=>{try{let e={subcategory_id:o,mode_of_payment:c,amount:parseFloat(f),date:(null==y?void 0:y.toISOString())||new Date().toISOString()},a=await m.F.expenses.update(i,e);a.error?console.error("Error updating expense:",a.error):(g.oR.success("Expense updated successfully",{duration:4e3,position:"top-center",classNames:{success:"!text-green-600"}}),null==t||t(),s((0,h.rW)()),s((0,h.UB)(!1)))}catch(e){console.error("Error updating expense:",e)}},w=e=>{s((0,h.SR)(e))};return(0,a.jsx)(l.lG,{open:b,onOpenChange:e=>{s((0,h.UB)(e)),e||s((0,h.rW)())},children:(0,a.jsxs)(l.Cf,{className:"sm:max-w-4xl w-full",children:[(0,a.jsxs)(l.c7,{children:[(0,a.jsx)(l.L3,{children:"Update Expense"}),(0,a.jsx)(l.rr,{children:"Update your expense."})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 py-6",children:[(0,a.jsxs)("div",{className:"flex-1 flex flex-col gap-4",children:[(0,a.jsx)(v,{selected:o||"",onSelect:e=>{s((0,h.cC)(e))}}),(0,a.jsx)(j,{selected:c,onSelect:e=>{s((0,h.pe)(e))}}),(0,a.jsx)(r.p,{placeholder:"How much did you spent? (".concat((0,d.f)(),")"),className:"px-2",value:f,onChange:e=>w(e.target.value),onKeyDown:e=>e.key.match(/[^0-9]/g)&&"Backspace"!==e.key&&!e.key.startsWith("Arrow")&&("."!==e.key||e.target.value.includes("."))&&e.preventDefault()})]}),(0,a.jsx)("div",{className:"flex-1 flex items-start justify-center",children:(0,a.jsxs)(p.Zp,{className:"py-0 gap-0 overflow-hidden",children:[(0,a.jsx)(p.aR,{className:"text-center bg-background place-content-center gap-0 pt-4",children:(0,a.jsx)("span",{className:"text-muted-foreground",children:"When did you spent?"})}),(0,a.jsx)(u.V,{mode:"single",disabled:{after:new Date},endMonth:new Date,classNames:{day:"w-10 h-10"},selected:y||void 0,onSelect:e=>{s((0,h.kQ)(e||null))}})]})})]}),(0,a.jsxs)(l.Es,{className:"gap-4 border-t pt-4",children:[(0,a.jsx)(l.HM,{className:"text-sm px-4 h-8 rounded-md border cursor-pointer",children:"Cancel"}),(0,a.jsx)(n.$,{size:"sm",className:"w-16",onClick:N,children:"Update"})]})]})})}},78256:(e,t,s)=>{"use strict";s.d(t,{bq:()=>u,eb:()=>x,gC:()=>p,l6:()=>c,yv:()=>d});var a=s(37876);s(14232);var l=s(94615),n=s(30822),r=s(33276),i=s(21575),o=s(48647);function c(e){let{...t}=e;return(0,a.jsx)(l.bL,{"data-slot":"select",...t})}function d(e){let{...t}=e;return(0,a.jsx)(l.WT,{"data-slot":"select-value",...t})}function u(e){let{className:t,size:s="default",children:r,...i}=e;return(0,a.jsxs)(l.l9,{"data-slot":"select-trigger","data-size":s,className:(0,o.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i,children:[r,(0,a.jsx)(l.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"size-4 opacity-50"})})]})}function p(e){let{className:t,children:s,position:n="popper",...r}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsxs)(l.UC,{"data-slot":"select-content",className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[(0,a.jsx)(m,{}),(0,a.jsx)(l.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,a.jsx)(h,{})]})})}function x(e){let{className:t,children:s,...n}=e;return(0,a.jsxs)(l.q7,{"data-slot":"select-item",className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(r.A,{className:"size-4"})})}),(0,a.jsx)(l.p4,{children:s})]})}function m(e){let{className:t,...s}=e;return(0,a.jsx)(l.PP,{"data-slot":"select-scroll-up-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(i.A,{className:"size-4"})})}function h(e){let{className:t,...s}=e;return(0,a.jsx)(l.wn,{"data-slot":"select-scroll-down-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(n.A,{className:"size-4"})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[627,992,585,655,185,61,330,636,593,792],()=>t(24092)),_N_E=e.O()}]);