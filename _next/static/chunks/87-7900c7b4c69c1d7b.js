"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87],{19657:(e,a,t)=>{t.d(a,{A:()=>j});var n=t(37876),s=t(14232),r=t(31777),l=t(59688),d=t(33276),o=t(8893),c=t(43487),i=t(52393),u=t(6960),m=t(29898),x=t(28638),p=t(13816),h=t(9537),g=t(77932),f=t(9299),y=t(27122);let b=e=>{let{placeholder:a="Select Option",selected:t,onSelect:l,onSelectItem:o}=e,c=(0,r.d4)(e=>e.categories.categories),[i,m]=(0,s.useState)(null);(0,s.useEffect)(()=>{m(c.flatMap(e=>e.subcategories).find(e=>(null==e?void 0:e._id)===t))},[t,c]);let x=e=>{m(e),l&&l(e._id),o&&o(e)};return(0,n.jsxs)(h.rI,{children:[(0,n.jsx)(h.ty,{asChild:!0,children:(0,n.jsx)(u.$,{variant:"outline",className:"w-full justify-start px-2",children:i?(0,n.jsx)("span",{className:"font-semibold",children:i.name}):(0,n.jsx)("span",{className:"text-muted-foreground",children:a})})}),(0,n.jsx)(h.SQ,{side:"bottom",align:"start",className:"max-w-60 lg:max-w-[600px]",children:(0,n.jsxs)(f.F,{className:"w-full whitespace-nowrap",children:[(0,n.jsx)("div",{className:"flex flex-col flex-wrap max-h-84 w-max gap-2 pb-3",children:c.map(e=>{var a;return(0,n.jsxs)(h.I,{className:"w-44",children:[(0,n.jsx)(h.lp,{className:"font-semibold",children:e.category_name}),(0,n.jsx)(h.mB,{className:"mx-0"}),null==(a=e.subcategories)?void 0:a.map(e=>(0,n.jsxs)(h._2,{className:"text-muted-foreground",onSelect:()=>x(e),children:[e.name,t===e._id&&(0,n.jsx)(d.A,{})]},e._id))]},e._id)})}),(0,n.jsx)(f.$,{orientation:"horizontal"})]})})]})},v=e=>{let{selected:a,onSelect:t}=e,[r,l]=(0,s.useState)(null);(0,s.useEffect)(()=>{l(y.Q.find(e=>e.value===a))},[a,y.Q]);let o=e=>{l(e),t(null==e?void 0:e.value)};return(0,n.jsxs)(h.rI,{children:[(0,n.jsx)(h.ty,{asChild:!0,children:(0,n.jsx)(u.$,{variant:"outline",className:"w-full justify-start px-2",children:r?(0,n.jsx)("span",{className:"font-semibold",children:null==r?void 0:r.label}):(0,n.jsx)("span",{className:"text-muted-foreground",children:"How did you spent?"})})}),(0,n.jsx)(h.SQ,{side:"bottom",align:"start",className:"w-full sm:w-96",children:y.Q.map(e=>(0,n.jsxs)(h._2,{onSelect:()=>o(e),children:[e.label,a===e.value&&(0,n.jsx)(d.A,{})]},e.value))})]})},j=e=>{let{onAdd:a}=e,t=(0,r.wA)(),{category:s,mode:d,amount:h,date:f,isAddExpenseOpen:y}=(0,r.d4)(e=>e.global),j=async()=>{try{let e={subcategory_id:s,mode_of_payment:d,amount:parseFloat(h),date:f||new Date().getTime()},n=await o.F.expenses.create(e);n.error?console.error("Error creating expense:",n.error):(l.oR.success("Expense created successfully",{duration:4e3,position:"top-center",classNames:{success:"!text-green-600"}}),null==a||a(),t((0,c.rW)()),t((0,c.us)(!1)))}catch(e){console.error("Error creating expense:",e)}},w=e=>{t((0,c.SR)(e))};return(0,n.jsx)(p.lG,{open:y,onOpenChange:e=>{t((0,c.us)(e)),e||t((0,c.rW)())},children:(0,n.jsxs)(p.Cf,{className:"sm:max-w-4xl w-full max-h-[calc(100vh-2rem)] overflow-auto px-2 sm:px-6",children:[(0,n.jsxs)(p.c7,{children:[(0,n.jsx)(p.L3,{children:"Add Expense"}),(0,n.jsx)(p.rr,{children:"Add a new expense to your list."})]}),(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 py-6",children:[(0,n.jsxs)("div",{className:"flex-1 flex flex-col gap-4",children:[(0,n.jsx)(b,{placeholder:"Where did you spent?",selected:s||"",onSelect:e=>{t((0,c.cC)(e))}}),(0,n.jsx)(v,{selected:d,onSelect:e=>{t((0,c.pe)(e))}}),(0,n.jsx)(g.p,{placeholder:"How much did you spent? (".concat((0,i.f)(),")"),className:"px-2 text-sm",value:h,onChange:e=>w(e.target.value),onKeyDown:e=>e.key.match(/[^0-9]/g)&&"Backspace"!==e.key&&!e.key.startsWith("Arrow")&&("."!==e.key||e.target.value.includes("."))&&e.preventDefault()})]}),(0,n.jsx)("div",{className:"flex-1 flex items-start justify-center",children:(0,n.jsxs)(x.Zp,{className:"py-0 gap-0 overflow-hidden",children:[(0,n.jsx)(x.aR,{className:"text-center bg-background place-content-center gap-0 pt-4",children:(0,n.jsx)("span",{className:"text-muted-foreground",children:"When did you spent?"})}),(0,n.jsx)(m.V,{mode:"single",disabled:{after:new Date},endMonth:new Date,selected:new Date(f),onSelect:e=>{t((0,c.kQ)((null==e?void 0:e.getTime())||null))}})]})})]}),(0,n.jsxs)(p.Es,{className:"gap-4 border-t pt-4",children:[(0,n.jsx)(p.HM,{className:"text-sm px-4 h-8 rounded-md border cursor-pointer",children:"Cancel"}),(0,n.jsx)(u.$,{size:"sm",className:"w-16",onClick:j,children:"Add"})]})]})})}},28638:(e,a,t)=>{t.d(a,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>r,aR:()=>l,wL:()=>i});var n=t(37876);t(14232);var s=t(48647);function r(e){let{className:a,...t}=e;return(0,n.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...t})}function l(e){let{className:a,...t}=e;return(0,n.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...t})}function d(e){let{className:a,...t}=e;return(0,n.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",a),...t})}function o(e){let{className:a,...t}=e;return(0,n.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",a),...t})}function c(e){let{className:a,...t}=e;return(0,n.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",a),...t})}function i(e){let{className:a,...t}=e;return(0,n.jsx)("div",{"data-slot":"card-footer",className:(0,s.cn)("flex items-center px-6 [.border-t]:pt-6",a),...t})}},29898:(e,a,t)=>{t.d(a,{V:()=>h});var n=t(28888),s=t(37876),r=t(14232),l=t(22963),d=t(96108),o=t(30822),c=t(3586),i=t(86399),u=t(48647),m=t(6960);function x(){let e=(0,n._)(["rtl:**:[.rdp-button_next>svg]:rotate-180"],["rtl:**:[.rdp-button\\_next>svg]:rotate-180"]);return x=function(){return e},e}function p(){let e=(0,n._)(["rtl:**:[.rdp-button_previous>svg]:rotate-180"],["rtl:**:[.rdp-button\\_previous>svg]:rotate-180"]);return p=function(){return e},e}function h(e){let{className:a,classNames:t,showOutsideDays:n=!0,captionLayout:r="label",buttonVariant:h="ghost",formatters:f,components:y,...b}=e,v=(0,c.a)();return(0,s.jsx)(i.h,{showOutsideDays:n,className:(0,u.cn)("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw(x()),String.raw(p()),a),captionLayout:r,formatters:{formatMonthDropdown:e=>e.toLocaleString("default",{month:"short"}),...f},classNames:{root:(0,u.cn)("w-fit",v.root),months:(0,u.cn)("flex gap-4 flex-col md:flex-row relative",v.months),month:(0,u.cn)("flex flex-col w-full gap-4",v.month),nav:(0,u.cn)("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",v.nav),button_previous:(0,u.cn)((0,m.r)({variant:h}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",v.button_previous),button_next:(0,u.cn)((0,m.r)({variant:h}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",v.button_next),month_caption:(0,u.cn)("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",v.month_caption),dropdowns:(0,u.cn)("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",v.dropdowns),dropdown_root:(0,u.cn)("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",v.dropdown_root),dropdown:(0,u.cn)("absolute inset-0 opacity-0",v.dropdown),caption_label:(0,u.cn)("select-none font-medium","label"===r?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",v.caption_label),table:"w-full border-collapse",weekdays:(0,u.cn)("flex",v.weekdays),weekday:(0,u.cn)("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",v.weekday),week:(0,u.cn)("flex w-full mt-2",v.week),week_number_header:(0,u.cn)("select-none w-(--cell-size)",v.week_number_header),week_number:(0,u.cn)("text-[0.8rem] select-none text-muted-foreground",v.week_number),day:(0,u.cn)("relative w-8 h-8 sm:w-10 sm:h-10 p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",v.day),range_start:(0,u.cn)("rounded-l-md bg-accent",v.range_start),range_middle:(0,u.cn)("rounded-none",v.range_middle),range_end:(0,u.cn)("rounded-r-md bg-accent",v.range_end),today:(0,u.cn)("bg-accent text-accent-foreground rounded-md",v.today),outside:(0,u.cn)("text-muted-foreground aria-selected:text-muted-foreground",v.outside),disabled:(0,u.cn)("text-muted-foreground opacity-50",v.disabled),hidden:(0,u.cn)("invisible",v.hidden),...t},components:{Root:e=>{let{className:a,rootRef:t,...n}=e;return(0,s.jsx)("div",{"data-slot":"calendar",ref:t,className:(0,u.cn)(a),...n})},Chevron:e=>{let{className:a,orientation:t,...n}=e;return"left"===t?(0,s.jsx)(l.A,{className:(0,u.cn)("size-4",a),...n}):"right"===t?(0,s.jsx)(d.A,{className:(0,u.cn)("size-4",a),...n}):(0,s.jsx)(o.A,{className:(0,u.cn)("size-4",a),...n})},DayButton:g,WeekNumber:e=>{let{children:a,...t}=e;return(0,s.jsx)("td",{...t,children:(0,s.jsx)("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:a})})},...y},...b})}function g(e){let{className:a,day:t,modifiers:n,...l}=e,d=(0,c.a)(),o=r.useRef(null);return r.useEffect(()=>{var e;n.focused&&(null==(e=o.current)||e.focus())},[n.focused]),(0,s.jsx)(m.$,{ref:o,variant:"ghost",size:"icon","data-day":t.date.toLocaleDateString(),"data-selected-single":n.selected&&!n.range_start&&!n.range_end&&!n.range_middle,"data-range-start":n.range_start,"data-range-end":n.range_end,"data-range-middle":n.range_middle,className:(0,u.cn)("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",d.day,a),...l})}},46011:(e,a,t)=>{t.d(a,{A:()=>_});var n=t(37876),s=t(31777),r=t(70641),l=t(12089),d=t(68283),o=t(59688);t(14232);var c=t(48647);function i(e){let{className:a,...t}=e;return(0,n.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,n.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...t})})}function u(e){let{className:a,...t}=e;return(0,n.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...t})}function m(e){let{className:a,...t}=e;return(0,n.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...t})}function x(e){let{className:a,...t}=e;return(0,n.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...t})}function p(e){let{className:a,...t}=e;return(0,n.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...t})}function h(e){let{className:a,...t}=e;return(0,n.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...t})}var g=t(78651),f=t(53333),y=t(6960),b=t(43487),v=t(52393),j=t(8893),w=t(95506),N=t(14e3);let _=e=>{let{expenses:a,selectedItems:t,setSelectedItems:_,loading:k,selectable:D=!1,onDelete:S}=e,A=(0,s.wA)(),C=(0,v.f)(),z=(0,N.useSearchParams)(),M=(0,N.usePathname)(),E=async()=>{try{let a=await j.F.expenses.getRecents({limit:5});if(!a.error){var e;A((0,w.X9)((null==(e=a.data)?void 0:e.data)||[]))}j.F.expenses.getMonthlyAnalytics({month:parseInt(z.get("month")||"")||new Date().getMonth()+1,year:parseInt(z.get("year")||"")||new Date().getFullYear()}).then(e=>{let a=(0,c.Gg)(parseInt(z.get("month")||"")-1||new Date().getMonth()+1,parseInt(z.get("year")||"")||new Date().getFullYear());if(!e.error){var t,n,s,r;let l={totalAmount:null==(t=e.data)?void 0:t.data.totalAmount,barChartData:(null==(n=e.data)?void 0:n.data.analytics.daily.length)?a.map(a=>{var t;let n=null==(t=e.data)?void 0:t.data.analytics.daily.find(e=>e.date===a.date);return{...a,amount:n?n.amount:0}}):[],pieChartData:null==(s=e.data)?void 0:s.data.analytics.paymentModes.map((e,a)=>({name:e.mode,amount:e.amount,fill:"var(--chart-".concat(a+1,")")})),categoriesBarChartData:null==(r=e.data)?void 0:r.data.analytics.categories.map(e=>({name:e.name,amount:e.amount,color:e.color}))};A((0,w.z)(l))}})}catch(e){console.error("Error fetching recent expenses:",e)}},I=async()=>{try{var e,a,t,n,s,r,l,o,i,u,m,x,p,h,g,f;if("monthly"===z.get("tab")){let d=(0,c.Gg)(parseInt(z.get("month")||"")-1||new Date().getMonth()+1,parseInt(z.get("year")||"")||new Date().getFullYear()),u=await j.F.expenses.getMonthlyAnalytics({month:parseInt(z.get("month")||new Date().toLocaleString("en-US",{month:"numeric"})),year:parseInt(z.get("year")||new Date().getFullYear().toString())});if(!u.error){let c={totalAmount:null==(e=u.data)?void 0:e.data.totalAmount,barChartData:(null==(a=u.data)?void 0:a.data.analytics.daily.length)?d.map(e=>{var a;let t=null==(a=u.data)?void 0:a.data.analytics.daily.find(a=>a.date===e.date);return{...e,amount:t?t.amount:0}}):[],pieChartData:null==(t=u.data)?void 0:t.data.analytics.paymentModes.map((e,a)=>({name:e.mode,amount:e.amount,fill:"var(--chart-".concat(a+1,")")})),expenses:null==(n=u.data)?void 0:n.data.expenses,topPaymentMode:{mostUsedPaymentMode:null==(r=u.data)||null==(s=r.data.analytics.paymentModes)?void 0:s.reduce((e,a)=>e.used>a.used?e:a,{used:0,amount:0,mode:""}),highestAmountPaymentMode:null==(o=u.data)||null==(l=o.data.analytics.paymentModes)?void 0:l.reduce((e,a)=>e.amount>a.amount?e:a,{used:0,amount:0,mode:""})},categoriesBarChartData:null==(i=u.data)?void 0:i.data.analytics.categories.map(e=>({name:e.name,amount:e.amount,color:e.color}))};A((0,w.S2)(c))}}else if("yearly"===z.get("tab")){let e=await j.F.expenses.getYearlyAnalytics({year:parseInt(z.get("year")||new Date().getFullYear().toString())});if(!e.error){let a={totalAmount:null==(u=e.data)?void 0:u.data.totalAmount,barChartData:(null==(m=e.data)?void 0:m.data.analytics.monthly.some(e=>e.amount>0))?null==(x=e.data)?void 0:x.data.analytics.monthly.map(e=>({date:(0,d.Yq)(new Date(parseInt(z.get("year")||"")||new Date().getFullYear(),e.month-1),"yyyy-MM-dd"),amount:e.amount})):[],pieChartData:null==(p=e.data)?void 0:p.data.analytics.paymentModes.map((e,a)=>({name:e.mode,amount:e.amount,fill:"var(--chart-".concat(a+1,")")})),expenses:null==(h=e.data)?void 0:h.data.expenses,topPaymentMode:{mostUsedPaymentMode:null==(g=e.data)?void 0:g.data.analytics.mostUsedPaymentMode,highestAmountPaymentMode:null==(f=e.data)?void 0:f.data.analytics.highestAmountPaymentMode}};A((0,w.pl)(a))}}}catch(e){console.error("Error fetching analytics expenses:",e)}};return(0,n.jsxs)(i,{className:"rounded-md overflow-hidden my-2 text-base",children:[(0,n.jsx)(u,{className:"bg-muted",children:(0,n.jsxs)(x,{children:[D&&(0,n.jsx)(p,{className:"w-8",children:(0,n.jsx)(g.S,{checked:a.length>0&&(null==t?void 0:t.size)===a.length||((null==t?void 0:t.size)||0)>0&&"indeterminate",onCheckedChange:e=>{"indeterminate"===e&&(null==_||_(new Set(a.map(e=>e._id)))),e?null==_||_(new Set(a.map(e=>e._id))):null==_||_(new Set)}})}),(0,n.jsx)(p,{className:"w-2/5 min-w-40",children:"Spent on"}),(0,n.jsx)(p,{className:"min-w-28",children:"Date"}),(0,n.jsx)(p,{className:"text-right min-w-20",children:"Amount"}),(0,n.jsx)(p,{className:"text-center max-w-36",children:"Mode of Payment"}),(0,n.jsx)(p,{className:"text-center min-w-24 max-w-28",children:"Action"})]})}),(0,n.jsx)(m,{className:"text-sm",children:k?Array.from({length:5},(e,a)=>(0,n.jsx)(x,{children:(0,n.jsx)(h,{colSpan:D?6:5,className:"py-1 px-0",children:(0,n.jsx)(f.E,{className:"w-full h-8"})})},a)):a.length?a.map(e=>(0,n.jsxs)(x,{children:[D&&(0,n.jsx)(h,{className:"w-8",children:(0,n.jsx)(g.S,{checked:null==t?void 0:t.has(e._id),onCheckedChange:a=>{let n=new Set(t);a?n.add(e._id):n.delete(e._id),null==_||_(n)}})}),(0,n.jsx)(h,{className:"font-medium py-1",children:e.subcategory_id.name}),(0,n.jsx)(h,{className:"py-1",children:(0,d.Yq)(e.date,"MMM dd, yyyy")}),(0,n.jsxs)(h,{className:"text-right py-1",children:[C," ",e.amount]}),(0,n.jsx)(h,{className:"text-center py-1",children:(0,c.Ao)(e.mode_of_payment)}),(0,n.jsx)(h,{className:"text-center py-1",children:(0,n.jsxs)("div",{className:"flex items-center justify-evenly gap-2",children:[(0,n.jsx)(y.$,{variant:"outline",size:"sm",className:"h-8 px-1 has-[>svg]:px-1 aspect-square",onClick:()=>{A((0,b.UB)(!0)),A((0,b.s$)(e._id)),A((0,b.cC)(e.subcategory_id._id)),A((0,b.pe)(e.mode_of_payment)),A((0,b.SR)(e.amount.toString())),A((0,b.kQ)(new Date(e.date).getTime()))},children:(0,n.jsx)(r.A,{className:"size-4"})}),(0,n.jsx)(y.$,{variant:"outline",size:"sm",className:"h-8 px-1 has-[>svg]:px-1 aspect-square",onClick:()=>{j.F.expenses.delete(e._id).then(e=>{e.error||(o.oR.success("Expense deleted successfully",{duration:4e3,position:"top-center",classNames:{success:"!bg-destructive"}}),null==S||S(),"/dashboard"===M?E():"/expenses/analytics"===M&&I())})},children:(0,n.jsx)(l.A,{className:"size-4 text-destructive"})})]})})]},e._id)):(0,n.jsx)(x,{children:(0,n.jsx)(h,{colSpan:D?6:5,className:"h-24 text-center",children:"No expenses"})})})]})}},52393:(e,a,t)=>{t.d(a,{f:()=>r});var n=t(13408);let s={USD:{symbol:"$",name:"US Dollar",code:"USD",symbolNative:"$",decimalDigits:2,rounding:0,codeNumeric:"840"},EUR:{symbol:"€",name:"Euro",code:"EUR",symbolNative:"€",decimalDigits:2,rounding:0,codeNumeric:"978"},GBP:{symbol:"\xa3",name:"British Pound",code:"GBP",symbolNative:"\xa3",decimalDigits:2,rounding:0,codeNumeric:"826"},INR:{symbol:"₹",name:"Indian Rupee",code:"INR",symbolNative:"₹",decimalDigits:2,rounding:0,codeNumeric:"356"},AUD:{symbol:"A$",name:"Australian Dollar",code:"AUD",symbolNative:"$",decimalDigits:2,rounding:0,codeNumeric:"036"}};Object.keys(s).map(e=>({value:e,label:s[e].name,symbol:s[e].symbol}));let r=()=>{var e;let{settings:a}=(0,n.GV)(e=>e.user);return null==(e=s[null==a?void 0:a.currency])?void 0:e.symbol}},60433:(e,a,t)=>{t.d(a,{A:()=>v});var n=t(37876),s=t(13816),r=t(6960),l=t(77932),d=t(14232),o=t(9537),c=t(9299),i=t(52393),u=t(29898),m=t(28638),x=t(31777),p=t(8893),h=t(43487),g=t(27122),f=t(59688);let y=e=>{let{selected:a,onSelect:t}=e,s=(0,x.d4)(e=>e.categories.categories),[l,i]=(0,d.useState)(null);(0,d.useEffect)(()=>{i(s.flatMap(e=>e.subcategories).find(e=>(null==e?void 0:e._id)===a))},[a,s]);let u=e=>{i(e),t(e._id)};return(0,n.jsxs)(o.rI,{children:[(0,n.jsx)(o.ty,{asChild:!0,children:(0,n.jsx)(r.$,{variant:"outline",className:"w-full justify-start px-2",children:l?(0,n.jsx)("span",{className:"font-semibold",children:l.name}):(0,n.jsx)("span",{className:"text-muted-foreground",children:"Where did you spent?"})})}),(0,n.jsx)(o.SQ,{side:"bottom",align:"start",className:"lg:max-w-[600px]",children:(0,n.jsxs)(c.F,{className:"w-full whitespace-nowrap",children:[(0,n.jsx)("div",{className:"flex flex-col flex-wrap max-h-80 w-max gap-2 pb-3",children:s.map(e=>{var a;return(0,n.jsxs)(o.I,{className:"w-44",children:[(0,n.jsx)(o.lp,{className:"font-semibold",children:e.category_name}),(0,n.jsx)(o.mB,{className:"mx-0"}),null==(a=e.subcategories)?void 0:a.map(e=>(0,n.jsx)(o._2,{className:"text-muted-foreground",onSelect:()=>u(e),children:e.name},e._id))]},e._id)})}),(0,n.jsx)(c.$,{orientation:"horizontal"})]})})]})},b=e=>{let{selected:a,onSelect:t}=e,[s,l]=(0,d.useState)(null);(0,d.useEffect)(()=>{l(g.Q.find(e=>e.value===a))},[a,g.Q]);let c=e=>{l(e),t(null==e?void 0:e.value)};return(0,n.jsxs)(o.rI,{children:[(0,n.jsx)(o.ty,{asChild:!0,children:(0,n.jsx)(r.$,{variant:"outline",className:"w-full justify-start px-2",children:s?(0,n.jsx)("span",{className:"font-semibold",children:null==s?void 0:s.label}):(0,n.jsx)("span",{className:"text-muted-foreground",children:"How did you spent?"})})}),(0,n.jsx)(o.SQ,{side:"bottom",align:"start",className:"w-96",children:g.Q.map(e=>(0,n.jsx)(o._2,{onSelect:()=>c(e),children:e.label},e.value))})]})},v=e=>{let{onUpdate:a}=e,t=(0,x.wA)(),{expenseId:d,category:o,mode:c,amount:g,date:v,isUpdateExpenseOpen:j}=(0,x.d4)(e=>e.global),w=async()=>{try{let e={subcategory_id:o,mode_of_payment:c,amount:parseFloat(g),date:v||new Date().getTime()},n=await p.F.expenses.update(d,e);n.error?console.error("Error updating expense:",n.error):(f.oR.success("Expense updated successfully",{duration:4e3,position:"top-center",classNames:{success:"!text-green-600"}}),null==a||a(),t((0,h.rW)()),t((0,h.UB)(!1)))}catch(e){console.error("Error updating expense:",e)}},N=e=>{t((0,h.SR)(e))};return(0,n.jsx)(s.lG,{open:j,onOpenChange:e=>{t((0,h.UB)(e)),e||t((0,h.rW)())},children:(0,n.jsxs)(s.Cf,{className:"sm:max-w-4xl w-full",children:[(0,n.jsxs)(s.c7,{children:[(0,n.jsx)(s.L3,{children:"Update Expense"}),(0,n.jsx)(s.rr,{children:"Update your expense."})]}),(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 py-6",children:[(0,n.jsxs)("div",{className:"flex-1 flex flex-col gap-4",children:[(0,n.jsx)(y,{selected:o||"",onSelect:e=>{t((0,h.cC)(e))}}),(0,n.jsx)(b,{selected:c,onSelect:e=>{t((0,h.pe)(e))}}),(0,n.jsx)(l.p,{placeholder:"How much did you spent? (".concat((0,i.f)(),")"),className:"px-2",value:g,onChange:e=>N(e.target.value),onKeyDown:e=>e.key.match(/[^0-9]/g)&&"Backspace"!==e.key&&!e.key.startsWith("Arrow")&&("."!==e.key||e.target.value.includes("."))&&e.preventDefault()})]}),(0,n.jsx)("div",{className:"flex-1 flex items-start justify-center",children:(0,n.jsxs)(m.Zp,{className:"py-0 gap-0 overflow-hidden",children:[(0,n.jsx)(m.aR,{className:"text-center bg-background place-content-center gap-0 pt-4",children:(0,n.jsx)("span",{className:"text-muted-foreground",children:"When did you spent?"})}),(0,n.jsx)(u.V,{mode:"single",disabled:{after:new Date},endMonth:new Date,selected:new Date(v),onSelect:e=>{t((0,h.kQ)((null==e?void 0:e.getTime())||null))}})]})})]}),(0,n.jsxs)(s.Es,{className:"gap-4 border-t pt-4",children:[(0,n.jsx)(s.HM,{className:"text-sm px-4 h-8 rounded-md border cursor-pointer",children:"Cancel"}),(0,n.jsx)(r.$,{size:"sm",className:"w-16",onClick:w,children:"Update"})]})]})})}},78651:(e,a,t)=>{t.d(a,{S:()=>o});var n=t(37876);t(14232);var s=t(29470),r=t(84296),l=t(33276),d=t(48647);function o(e){let{className:a,...t}=e;return(0,n.jsx)(s.bL,{"data-slot":"checkbox",className:(0,d.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=indeterminate]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary dark:data-[state=indeterminate]:bg-primary data-[state=checked]:border-primary dark:data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...t,children:(0,n.jsxs)(s.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:["indeterminate"===t.checked&&(0,n.jsx)(r.A,{className:"size-3.5"}),!0===t.checked&&(0,n.jsx)(l.A,{className:"size-3.5"})]})})}}}]);